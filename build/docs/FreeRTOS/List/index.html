<!doctype html>
<html lang="ljyws" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-FreeRTOS/List/freertos_list" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">FreeRTOS List | Hello!</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://ljyws.com/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://ljyws.com/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://ljyws.com/docs/FreeRTOS/List/"><meta data-rh="true" property="og:locale" content="ljyws"><meta data-rh="true" name="docusaurus_locale" content="ljyws"><meta data-rh="true" name="docsearch:language" content="ljyws"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="FreeRTOS List | Hello!"><meta data-rh="true" name="description" content="FreeRTOS 列表"><meta data-rh="true" property="og:description" content="FreeRTOS 列表"><link data-rh="true" rel="icon" href="/img/sheep.ico"><link data-rh="true" rel="canonical" href="https://ljyws.com/docs/FreeRTOS/List/"><link data-rh="true" rel="alternate" href="https://ljyws.com/docs/FreeRTOS/List/" hreflang="ljyws"><link data-rh="true" rel="alternate" href="https://ljyws.com/docs/FreeRTOS/List/" hreflang="x-default"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous">
<script src="src/custom-script.js" async></script><link rel="stylesheet" href="/assets/css/styles.0ace63c3.css">
<script src="/assets/js/runtime~main.071c7e8b.js" defer="defer"></script>
<script src="/assets/js/main.b2c209a9.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_vL3y" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/home_logo.svg" alt="My Site Logo" class="themedComponent_yNzQ themedComponent--light_XB7g"><img src="/img/home_logo.svg" alt="My Site Logo" class="themedComponent_yNzQ themedComponent--dark_Ih68"></div><b class="navbar__title text--truncate">HOME</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">BLOG</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ljyws" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vnGv"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_p3ST"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_nWpo"><div class="docsWrapper_S7Ws"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_ILib" type="button"></button><div class="docRoot_y1tR"><aside class="theme-doc-sidebar-container docSidebarContainer_Nn1g"><div class="sidebarViewport_GazN"><div class="sidebar_ys6v"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_FFtM"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">主页</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/ProgrammingTips/finite-state machine/fsm">ProgrammingTips</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/FreeRTOS/List/">FreeRTOS</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/FreeRTOS/List/">List</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/FreeRTOS/Scheduler/">Scheduler</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/StepperCtrl/simulation">StepperFocCtrl</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/FocController/foc_controller">FocController</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/quadruped-sim/eigen/">Quadruped-sim</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Linux/Imx6ull/imx6ull_uboot_kernel/">Linux</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_DINd"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_uqYz"><div class="docItemContainer_i0hV"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_tQkO" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_zh8J"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">FreeRTOS</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">List</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_yfiv theme-doc-toc-mobile tocMobile_gZBm"><button type="button" class="clean-btn tocCollapsibleButton_ntcz">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>FreeRTOS List</h1></header><h2 class="anchor anchorWithStickyNavbar_WC8U" id="freertos-列表">FreeRTOS 列表<a href="#freertos-列表" class="hash-link" aria-label="Direct link to FreeRTOS 列表" title="Direct link to FreeRTOS 列表">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_WC8U" id="定义">定义<a href="#定义" class="hash-link" aria-label="Direct link to 定义" title="Direct link to 定义">​</a></h3>
<p>在FreeRTOS内核中，有list.c/h，其实使用的是双向链表。
这里有两个概念，一个是列表(List)一个是列表项(ListItem).
可以简单的这样去理解：列表就是一个双向链表，列表项就是链表中的节点。</p>
<h4 class="anchor anchorWithStickyNavbar_WC8U" id="列表">列表<a href="#列表" class="hash-link" aria-label="Direct link to 列表" title="Direct link to 列表">​</a></h4>
<p>源码中对列表结构体的定义为：</p>
<div class="codeBlockContainer_v3UO theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ycsX"><pre tabindex="0" class="prism-code language-text codeBlock_eS68 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_hVnV"><span class="token-line" style="color:#393A34"><span class="token plain">typedef struct xLIST</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	volatile UBaseType_t uxNumberOfItems;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	ListItem_t * configLIST_VOLATILE pxIndex;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	MiniListItem_t xListEnd;					</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} List_t;</span><br></span></code></pre><div class="buttonGroup_tWxT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_isEe" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_vCuH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon__Hal"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>其中：</p>
<ul>
<li>uxNumberOfItems：是一个计数器，用于跟踪链表项目中也就是节点的数量</li>
<li>pxIndex: 指向链表中最后一个插入或删除的节点的指针。</li>
<li>xListEnd: 是一个 MiniListItem_t 类型的结构体，它是链表的末尾。它是一个迷你链表项，不包含任何实际的数据，只是用于表示链表的末尾。ss</li>
</ul>
<p>也就是说对于一个列表，下面可以挂很多个列表项，可以简单的理解为一个长条的桌子，上面挂了很多个便签，其中长条的桌子上有一个显示着这个桌子上挂了多少个便签，
还有一个可以移动的指针，指向现在访问着哪个便签，同时还有一个便签，用来表示是最后一个便签。
比如：
<img decoding="async" loading="lazy" alt="alt text" src="/assets/images/1-2d48392bcacdddfb38d07be4a6ebbd94.png" width="1259" height="435" class="img_PzW8"></p>
<p>大概就是这个意思。</p>
<h4 class="anchor anchorWithStickyNavbar_WC8U" id="列表项">列表项<a href="#列表项" class="hash-link" aria-label="Direct link to 列表项" title="Direct link to 列表项">​</a></h4>
<p>列表项就是链表中的节点，源码中对列表项结构体的定义为：</p>
<div class="codeBlockContainer_v3UO theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ycsX"><pre tabindex="0" class="prism-code language-text codeBlock_eS68 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_hVnV"><span class="token-line" style="color:#393A34"><span class="token plain">struct xLIST;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct xLIST_ITEM</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	configLIST_VOLATILE TickType_t xItemValue;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	struct xLIST_ITEM * configLIST_VOLATILE pxNext;	</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	struct xLIST_ITEM * configLIST_VOLATILE pxPrevious;	</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	void * pvOwner;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	struct xLIST * configLIST_VOLATILE pxContainer;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">typedef struct xLIST_ITEM ListItem_t;</span><br></span></code></pre><div class="buttonGroup_tWxT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_isEe" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_vCuH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon__Hal"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>其中：</p>
<ul>
<li>
<p>TickType_t xItemValue:这是一个 TickType_t 类型的变量，用于存储列表项的值。在大多数情况下，这个值用于对列表项进行排序</p>
</li>
<li>
<p>pxNext: 指向下一个列表项</p>
</li>
<li>
<p>pxPrevious: 指向上一个列表项</p>
</li>
<li>
<p>pvOwner: 指向包含该链表项的对象的指针，通常是一个任务控制块(TCB),比如现在是就绪任务列表，或者什么阻塞任务列表，和任务是挂钩的</p>
</li>
<li>
<p>pxContainer: 指向包含该链表项的链表的指针,指本链表被挂载到的链表指针</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_WC8U" id="初始化">初始化<a href="#初始化" class="hash-link" aria-label="Direct link to 初始化" title="Direct link to 初始化">​</a></h3>
<p>列表是在创建新任务时被初始化的，在xTaskCreate的时候，会调用prvAddNewTaskToReadyList函数，而在prvAddNewTaskToReadyList函数里，</p>
<div class="codeBlockContainer_v3UO theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ycsX"><pre tabindex="0" class="prism-code language-text codeBlock_eS68 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_hVnV"><span class="token-line" style="color:#393A34"><span class="token plain">if( uxCurrentNumberOfTasks == ( UBaseType_t ) 1 )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	prvInitialiseTaskLists();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	mtCOVERAGE_TEST_MARKER();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_tWxT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_isEe" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_vCuH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon__Hal"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>这段的意思就是检查 uxCurrentNumberOfTasks 的值，并根据是否是第一个任务来决定是否调用 prvInitialiseTaskLists 函数。
因此，意味着只有在系统启动并创建第一个任务的时候才会初始化链表。，也就是调用prvInitialiseTaskLists</p>
<p>prvInitialiseTaskLists 函数原型为：</p>
<div class="codeBlockContainer_v3UO theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ycsX"><pre tabindex="0" class="prism-code language-text codeBlock_eS68 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_hVnV"><span class="token-line" style="color:#393A34"><span class="token plain">static void prvInitialiseTaskLists( void )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //定义一个变量来存储任务的优先级</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    UBaseType_t uxPriority;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //遍历一遍所有的优先级</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	for( uxPriority = ( UBaseType_t ) 0U; uxPriority &lt; ( UBaseType_t ) configMAX_PRIORITIES; uxPriority++ )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //对于每个优先级，使用 vListInitialise 函数初始化一个就绪任务列表。pxReadyTasksLists 是一个数组，每个元素都是一个列表，用于存储具有相同优先级且处于就绪状态的任务。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		vListInitialise( &amp;( pxReadyTasksLists[ uxPriority ] ) );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //初始化两个延时任务列表，xDelayedTaskList1 和 xDelayedTaskList2。这两个列表用于存储因为延时而暂时不可执行的任务</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	vListInitialise( &amp;xDelayedTaskList1 );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	vListInitialise( &amp;xDelayedTaskList2 );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //初始化一个待处理就绪任务列表，用于存储那些即将进入就绪状态的任务</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	vListInitialise( &amp;xPendingReadyList );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //这是一个条件编译块，如果配置宏 INCLUDE_vTaskDelete 被设置为 1（表示支持任务删除功能），则初始化一个等待终止的任务列表 xTasksWaitingTermination。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	#if ( INCLUDE_vTaskDelete == 1 )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		vListInitialise( &amp;xTasksWaitingTermination );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	#endif /* INCLUDE_vTaskDelete */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //这是另一个条件编译块，如果配置宏 INCLUDE_vTaskSuspend 被设置为 1（表示支持任务挂起功能），则初始化一个挂起任务列表 xSuspendedTaskList。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	#if ( INCLUDE_vTaskSuspend == 1 )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		vListInitialise( &amp;xSuspendedTaskList );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	#endif /* INCLUDE_vTaskSuspend */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //初始化一个全局变量 pxDelayedTaskList，它指向当前正在使用的延时任务列表。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	pxDelayedTaskList = &amp;xDelayedTaskList1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //初始化一个全局变量 pxOverflowDelayedTaskList，它指向当前正在使用的延时任务列表的溢出部分。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	pxOverflowDelayedTaskList = &amp;xDelayedTaskList2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_tWxT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_isEe" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_vCuH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon__Hal"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>列表的初始化由vListInitialise完成，vListInitialise函数原型为：</p>
<div class="codeBlockContainer_v3UO theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ycsX"><pre tabindex="0" class="prism-code language-text codeBlock_eS68 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_hVnV"><span class="token-line" style="color:#393A34"><span class="token plain">void vListInitialise( List_t * const pxList )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //将列表的头指针和尾指针都指向列表的末尾，即xListEnd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	pxList-&gt;pxIndex = ( ListItem_t * ) &amp;( pxList-&gt;xListEnd );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //将列表的末尾的xItemValue设置为portMAX_DELAY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	pxList-&gt;xListEnd.xItemValue = portMAX_DELAY;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //将列表的末尾的pxNext和pxPrevious都指向列表的末尾，即xListEnd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	pxList-&gt;xListEnd.pxNext = ( ListItem_t * ) &amp;( pxList-&gt;xListEnd );	</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	pxList-&gt;xListEnd.pxPrevious = ( ListItem_t * ) &amp;( pxList-&gt;xListEnd );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //将列表的长度设置为0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	pxList-&gt;uxNumberOfItems = ( UBaseType_t ) 0U;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //将列表的头指针和尾指针都指向列表的末尾，即xListEnd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	listSET_LIST_INTEGRITY_CHECK_1_VALUE( pxList );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	listSET_LIST_INTEGRITY_CHECK_2_VALUE( pxList );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_tWxT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_isEe" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_vCuH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon__Hal"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>做了下面这几个事儿：</p>
<ul>
<li>首先将列表的轮询指针指向最小的值，也就是链表的末尾，因为里面没有有用的列表项，只有一个列表项，就是尾</li>
<li>然后将列表项尾的列表项值设置为最大值，确保排序的时候在最后</li>
<li>把列表尾项的next和Previous都指向尾，因为初始化的时候列表里面没列表项，所以都指向尾了</li>
<li>把列表的长度设置为0</li>
</ul>
<p>其次 链表项也需要初始化：</p>
<div class="codeBlockContainer_v3UO theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ycsX"><pre tabindex="0" class="prism-code language-text codeBlock_eS68 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_hVnV"><span class="token-line" style="color:#393A34"><span class="token plain">void vListInitialiseItem( ListItem_t * const pxItem )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	pxItem-&gt;pxContainer = NULL;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_tWxT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_isEe" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_vCuH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon__Hal"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>将链表项（节点）拥有者设置为空，表示该节点还没有插入到任何链表中</p>
<h3 class="anchor anchorWithStickyNavbar_WC8U" id="列表操作">列表操作<a href="#列表操作" class="hash-link" aria-label="Direct link to 列表操作" title="Direct link to 列表操作">​</a></h3>
<p>list.c/h中，有很多列表操作的函数：</p>
<ul>
<li>vListInitialise：初始化列表</li>
<li>vListInitialiseItem：初始化列表项</li>
<li>vListInsertEnd：在列表的末尾插入一个列表项</li>
<li>vListInsert：在列表中插入一个列表项</li>
<li>vListRemove：从列表中移除一个列表项</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_WC8U" id="尾部插入非顺序指定位置插入">尾部插入(非顺序，指定位置插入)<a href="#尾部插入非顺序指定位置插入" class="hash-link" aria-label="Direct link to 尾部插入(非顺序，指定位置插入)" title="Direct link to 尾部插入(非顺序，指定位置插入)">​</a></h4>
<p>指定位置插入就需要来考  虑当前列表的pxIndex指向哪里？</p>
<div class="codeBlockContainer_v3UO theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ycsX"><pre tabindex="0" class="prism-code language-text codeBlock_eS68 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_hVnV"><span class="token-line" style="color:#393A34"><span class="token plain">void vListInsertEnd( List_t * const pxList, ListItem_t * const pxNewListItem )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	/* 1. 定义一个新的临时列表项，并指向当前列表的pxIndex指向的列表项 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	ListItem_t * const pxIndex = pxList-&gt;pxIndex;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	/* 2. 两步检查，用来检查完整性 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	listTEST_LIST_INTEGRITY( pxList );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	listTEST_LIST_ITEM_INTEGRITY( pxNewListItem );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	/* 3. 将新列表项的后继指针指向当前列表的pxIndex指向的位置 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	pxNewListItem-&gt;pxNext = pxIndex;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	/* 4. 将新列表项的前驱指针指向当前列表的pxIndex指向位置的前驱指针 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	pxNewListItem-&gt;pxPrevious = pxIndex-&gt;pxPrevious;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	mtCOVERAGE_TEST_DELAY();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	/* 5. 当前列表的pxIndex指向的列表项的前一个列表项的后继指针指向新的列表项 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	pxIndex-&gt;pxPrevious-&gt;pxNext = pxNewListItem;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	/* 6. 当前列表的pxIndex指向的列表项的前一个列表项就等于新的列表项，其实就是把新列表项插入到了当前pxIndex指向的列表项的前面 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	pxIndex-&gt;pxPrevious = pxNewListItem;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	/* 7. 给新列表项设置拥有者 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	pxNewListItem-&gt;pxContainer = pxList;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	/* 8. 列表项数量加一 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	( pxList-&gt;uxNumberOfItems )++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_tWxT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_isEe" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_vCuH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon__Hal"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_WC8U" id="一般插入">一般插入<a href="#一般插入" class="hash-link" aria-label="Direct link to 一般插入" title="Direct link to 一般插入">​</a></h4>
<p>函数原型：</p>
<div class="codeBlockContainer_v3UO theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ycsX"><pre tabindex="0" class="prism-code language-text codeBlock_eS68 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_hVnV"><span class="token-line" style="color:#393A34"><span class="token plain">void vListInsert( List_t * const pxList, ListItem_t * const pxNewListItem )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	/* 1. 定义一个列表项 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	ListItem_t *pxIterator;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	/* 2. 获取新列表项里面的列表项值 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	const TickType_t xValueOfInsertion = pxNewListItem-&gt;xItemValue;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	/* 3. 只是两步检查，用来检查完整性 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	listTEST_LIST_INTEGRITY( pxList );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	listTEST_LIST_ITEM_INTEGRITY( pxNewListItem );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	/* 4. 如果新的列表项的列表项值为最大值 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	if( xValueOfInsertion == portMAX_DELAY )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	/* 5. 那么就把新的列表项插入到列表的末尾，也就是把列表项尾项的前向指针给到临时列表项 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		pxIterator = pxList-&gt;xListEnd.pxPrevious;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	/* 6. 否则就进行遍历 */ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	/* 7. 遍历列表，直到某一个列表项下一个列表项的项值大于新列表项的项值 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		for( pxIterator = ( ListItem_t * ) &amp;( pxList-&gt;xListEnd ); pxIterator-&gt;pxNext-&gt;xItemValue &lt;= xValueOfInsertion; pxIterator = pxIterator-&gt;pxNext )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			/* There is nothing to do here, just iterating to the wanted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			insertion position. */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	/* 8. 说明要插入到此刻这个列表项的下一个了，因此，将新列表项的后继指针指向此刻这个列表项的下一个列表项 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	pxNewListItem-&gt;pxNext = pxIterator-&gt;pxNext;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	/* 9. 将此刻这个列表项的下一个列表项的前向指针指向新列表项 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	pxNewListItem-&gt;pxNext-&gt;pxPrevious = pxNewListItem;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	/* 10. 将此刻这个列表项给到新列表项的前驱指针 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	pxNewListItem-&gt;pxPrevious = pxIterator;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	/* 11. 将新列表项给到此刻这个列表项的后继指针 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	pxIterator-&gt;pxNext = pxNewListItem;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	/* 12. 将新列表项的拥有者设置为当前这个列表 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	pxNewListItem-&gt;pxContainer = pxList;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	/* 13. 列表项数量加一 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	( pxList-&gt;uxNumberOfItems )++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_tWxT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_isEe" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_vCuH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon__Hal"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>总结一下就是：</p>
<ol>
<li>定义一个列表项</li>
<li>获取新列表项里面的列表项值</li>
<li>只是两步检查，用来检查完整性</li>
<li>如果新的列表项的列表项值为最大值</li>
<li>那么就把新的列表项插入到列表的末尾，也就是把列表项尾项的前向指针给到临时列表项</li>
<li>否则就进行遍历</li>
<li>遍历列表，直到某一个列表项下一个列表项的项值大于新列表项的项值</li>
<li>说明要插入到此刻这个列表项的下一个了，因此，将新列表项的后继指针指向此刻这个列表项的下一个列表项</li>
<li>将此刻这个列表项的下一个列表项的前向指针指向新列表项</li>
<li>将此刻这个列表项给到新列表项的前驱指针</li>
<li>将新列表项给到此刻这个列表项的后继指针</li>
<li>将新列表项的拥有者设置为当前这个列表</li>
<li>列表项数量加一</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_WC8U" id="列表删除">列表删除<a href="#列表删除" class="hash-link" aria-label="Direct link to 列表删除" title="Direct link to 列表删除">​</a></h4>
<p>函数原型为：</p>
<p>返回值为删除了某一个列表项厚，列表项所剩的数量</p>
<div class="codeBlockContainer_v3UO theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ycsX"><pre tabindex="0" class="prism-code language-text codeBlock_eS68 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_hVnV"><span class="token-line" style="color:#393A34"><span class="token plain">UBaseType_t uxListRemove( ListItem_t * const pxItemToRemove )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	// 获取要移除的列表项所属的列表</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	List_t * const pxList = pxItemToRemove-&gt;pxContainer;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	// 更新要移除的列表项的前后节点的指针，将其从列表中移除</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	pxItemToRemove-&gt;pxNext-&gt;pxPrevious = pxItemToRemove-&gt;pxPrevious;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	pxItemToRemove-&gt;pxPrevious-&gt;pxNext = pxItemToRemove-&gt;pxNext;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	mtCOVERAGE_TEST_DELAY();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	// 如果要移除的列表项是当前索引指向的列表项，则更新当前索引</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	if( pxList-&gt;pxIndex == pxItemToRemove )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		pxList-&gt;pxIndex = pxItemToRemove-&gt;pxPrevious;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		mtCOVERAGE_TEST_MARKER();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	// 将移除的列表项的所属列表指针置为空</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	pxItemToRemove-&gt;pxContainer = NULL;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	// 列表项数量减一</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	( pxList-&gt;uxNumberOfItems )--;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	// 返回列表项数量</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	return pxList-&gt;uxNumberOfItems;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_tWxT"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_isEe" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_vCuH"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon__Hal"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/ProgrammingTips/finite-state machine/fsm"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Finite State Machine</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/FreeRTOS/Scheduler/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Scheduler</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_KLHw thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#freertos-列表" class="table-of-contents__link toc-highlight">FreeRTOS 列表</a><ul><li><a href="#定义" class="table-of-contents__link toc-highlight">定义</a></li><li><a href="#初始化" class="table-of-contents__link toc-highlight">初始化</a></li><li><a href="#列表操作" class="table-of-contents__link toc-highlight">列表操作</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Partner Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.yltzdhbc.top/" target="_blank" rel="noopener noreferrer" class="footer__link-item">flame.yu<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vnGv"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://disnox.top/" target="_blank" rel="noopener noreferrer" class="footer__link-item">苏工<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vnGv"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs">Blog</a></li><li class="footer__item"><a href="https://github.com/ljyws" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vnGv"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
</body>
</html>